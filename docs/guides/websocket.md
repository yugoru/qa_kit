# WebSocket API: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–≠—Ç–∞ –ø–∞–º—è—Ç–∫–∞ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π WebSocket API, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ —É—á–µ–±–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ **QA Kit**.

---

## 1. –ö–∞–∫–æ–π —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞ –Ω—É–∂–µ–Ω

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è WebSocket –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å **WebSocket Request**, –∞ –Ω–µ HTTP‚Äë–∑–∞–ø—Ä–æ—Å.

### –í Postman:

1. –ù–∞–∂–º–∏—Ç–µ **New ‚Üí WebSocket Request**.
2. –í—Å—Ç–∞–≤—å—Ç–µ URL:

```
ws://localhost:8000/ws/orders
```

3. –ù–∞–∂–º–∏—Ç–µ **Connect** ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è.
4. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã.

---

## 2. –§–æ—Ä–º–∞—Ç –æ–±—â–µ–Ω–∏—è

WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–≤—É—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö:

* –í—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ **JSON‚Äë–∫–æ–º–∞–Ω–¥—ã**.
* –°–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç **JSON‚Äë—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏**.
* –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ WebSocket –ø–æ–ª—É—á–∞–µ—Ç **—Å–æ–±—ã—Ç–∏—è**, –∫–æ–≥–¥–∞ —á—Ç–æ-—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ —Å –∑–∞–∫–∞–∑–æ–º.

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏ –æ—Ç–≤–µ—Ç—ã ‚Äî –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

---

# üìå –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –∏ –ø—Ä–∏–º–µ—Ä—ã

## 3. –ö–æ–º–∞–Ω–¥–∞: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (Ping)

**–ó–∞–ø—Ä–æ—Å:**

```
{"action": "ping"}
```

**–û—Ç–≤–µ—Ç:**

```
{"type": "pong"}
```

---

## 4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ —Å –∏–º–µ–Ω–µ–º –∫–ª–∏–µ–Ω—Ç–∞.

**–ó–∞–ø—Ä–æ—Å:**

```
{"action": "create_order", "customer": "Yulia"}
```

**–û—Ç–≤–µ—Ç:**

```
{
  "type": "result",
  "action": "create_order",
  "order": {
    "id": 1,
    "customer": "Yulia",
    "status": "created"
  }
}
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —Å–æ–±—ã—Ç–∏–µ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

–ï—Å–ª–∏ —É –≤–∞—Å –æ—Ç–∫—Ä—ã—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ WebSocket‚Äë–∫–ª–∏–µ–Ω—Ç–æ–≤, –≤—Å–µ –æ–Ω–∏ –ø–æ–ª—É—á–∞—Ç —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

```
{
  "type": "order_created",
  "order_id": 1,
  "customer": "Yulia",
  "status": "created"
}
```

---

## 5. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

–î–æ–ø—É—Å—Ç–∏–º—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã:

* created ‚Üí paid / cancelled
* paid ‚Üí shipped / cancelled
* shipped ‚Üí delivered

### –ü—Ä–∏–º–µ—Ä: –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑

**–ó–∞–ø—Ä–æ—Å:**

```
{"action": "change_status", "order_id": 1, "status": "paid"}
```

**–û—Ç–≤–µ—Ç:**

```
{
  "type": "result",
  "action": "change_status",
  "order": {
    "id": 1,
    "customer": "Yulia",
    "status": "paid"
  }
}
```

### –û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥

```
{
  "type": "error",
  "action": "change_status",
  "error": "Cannot change status from 'delivered' to 'paid'"
}
```

### –®–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ

```
{
  "type": "order_status_changed",
  "order_id": 1,
  "customer": "Yulia",
  "status": "paid"
}
```

---

## 6. –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑

**–ó–∞–ø—Ä–æ—Å:**

```
{"action": "get_order", "order_id": 1}
```

**–û—Ç–≤–µ—Ç:**

```
{
  "type": "result",
  "action": "get_order",
  "order": {
    "id": 1,
    "customer": "Yulia",
    "status": "paid"
  }
}
```

### –û—à–∏–±–∫–∞ ‚Äî –∑–∞–∫–∞–∑–∞ –Ω–µ—Ç

```
{
  "type": "error",
  "action": "get_order",
  "error": "order not found"
}
```

---

## 7. –û—à–∏–±–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∞ / –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞

### –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON

```
{wrong-json}
```

–û—Ç–≤–µ—Ç:

```
{"type": "error", "error": "invalid_json"}
```

### –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π action

**–ó–∞–ø—Ä–æ—Å:**

```
{"action": "foo_bar"}
```

**–û—Ç–≤–µ—Ç:**

```
{
  "type": "error",
  "error": "unknown_action",
  "raw_action": "foo_bar"
}
```

---

# üéì –ß—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

* –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å JSON‚Äë–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
* –æ—à–∏–±–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤
* —Å–æ–±—ã—Ç–∏—è WebSocket
* –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å REST ‚Üî WS ‚Üî Kafka
* –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–±—ã—Ç–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö
* —Ä–∞–±–æ—Ç—É DevTools ‚Üí WS Frames
* –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞
