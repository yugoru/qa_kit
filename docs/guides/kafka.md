# Kafka / Redpanda: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

–≠—Ç–∞ –ø–∞–º—è—Ç–∫–∞ –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å Kafka (–≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ ‚Äî Redpanda), –∫–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–∞–∫–∏–µ —Ç–æ–ø–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –∫–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è.

–°–µ—Ä–≤–∏—Å Kafka —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω –≤ docker-compose –∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

# üìç 1. –ì–¥–µ –¥–æ—Å—Ç—É–ø–µ–Ω Kafka UI

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

```
docker compose up
```

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Kafka UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8081
```

–≠—Ç–æ —É–¥–æ–±–Ω–∞—è –ø–∞–Ω–µ–ª—å, –≥–¥–µ –º–æ–∂–Ω–æ:

* —Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ø–∏–∫–∏
* —á–∏—Ç–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
* —Å–º–æ—Ç—Ä–µ—Ç—å –∫–ª—é—á–∏, –æ—Ñ—Ñ—Å–µ—Ç—ã –∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏
* —Å–º–æ—Ç—Ä–µ—Ç—å consumer groups

---

# üìå 2. –ö–∞–∫–æ–π —Ç–æ–ø–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

–ù–∞—à —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–∏–Ω –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–ø–∏–∫:

```
order_events
```

–¢—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å–æ–±—ã—Ç–∏—è –∏–∑ API:

* order_created
* order_status_changed

---

# üì§ 3. –ö–∞–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ Kafka

–í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî JSON.

## –ü—Ä–∏–º–µ—Ä —Å–æ–±—ã—Ç–∏—è –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞

```
{
  "type": "order_created",
  "order_id": 1,
  "customer": "Yulia",
  "status": "created"
}
```

## –ü—Ä–∏–º–µ—Ä —Å–æ–±—ã—Ç–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞

```
{
  "type": "order_status_changed",
  "order_id": 1,
  "customer": "Yulia",
  "status": "paid"
}
```

---

# üîç 4. –ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Kafka UI

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:

1. –û—Ç–∫—Ä–æ–π **Topics**
2. –í—ã–±–µ—Ä–∏ **order_events**
3. –ù–∞–∂–º–∏ **Messages**
4. –¢–∞–º –ø–æ—è–≤—è—Ç—Å—è –≤—Å–µ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ —á–µ—Ä–µ–∑ REST –∏–ª–∏ WebSocket.

---

# üß™ 5. –ö–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è

–°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ Kafka –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —ç—Ç–∏—Ö REST-—Ä—É—á–µ–∫:

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞

```
POST http://localhost:8000/orders
{
  "customer": "Yulia"
}
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

```
POST http://localhost:8000/orders/1/pay
POST http://localhost:8000/orders/1/ship
POST http://localhost:8000/orders/1/deliver
POST http://localhost:8000/orders/1/cancel
```

–ò–ª–∏ —á–µ—Ä–µ–∑ WebSocket –∫–æ–º–∞–Ω–¥–æ–π:

### WebSocket create_order

```
{"action": "create_order", "customer": "Yulia"}
```

### WebSocket change_status

```
{"action": "change_status", "order_id": 1, "status": "paid"}
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ‚Äî –∑–∞–π–¥–∏—Ç–µ –≤ Kafka UI –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è.

---

# üß∞ 6. –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CLI (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)

–ï—Å–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç —Ö–æ—á–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Kafka –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `rpk`, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ Redpanda.

–ö–æ–º–∞–Ω–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**:

```
docker exec -it qa_kafka rpk topic list
```

–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:

```
docker exec -it qa_kafka rpk topic consume order_events -n 10
```

---

# üéì 7. –ß—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

* –ø—Ä–∏—Ö–æ–¥—è—Ç –ª–∏ —Å–æ–±—ã—Ç–∏—è –≤ Kafka
* —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π
* –ø–æ—Ä—è–¥–æ–∫ —Å–æ–±—ã—Ç–∏–π
* –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤
* –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å REST ‚Üî WS ‚Üî Kafka ‚Üî DB
* –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ lag (–≤ UI –≤–∏–¥–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ consumer groups)

